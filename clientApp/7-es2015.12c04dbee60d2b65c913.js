(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{TDBs:function(t,e,a){"use strict";a.r(e),a.d(e,"DashboardModule",(function(){return E}));var s=a("ofXK"),n=a("tyNb"),r=a("fXoL"),i=a("F5nt"),o=a("lyOD");let c=(()=>{class t{constructor(t){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(i.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"dashboard"],[1,"map",3,"mapId"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Pb(1,"router-outlet"),r.Pb(2,"app-ol-base",1),r.Tb()),2&t&&(r.Cb(2),r.lc("mapId","dashboardMap"))},directives:[n.f,o.a],styles:[".dashboard[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{width:100%;height:500px}"]}),t})();var h=a("Sa/z"),l=a("F11b");let u=(()=>{class t{constructor(t){this.httpSer=t}getEvent(){return this.httpSer.webapiUrl("Events"),this.httpSer.getData()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(l.a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();var b=a("kmnG"),m=a("d3UM"),p=a("FKr1"),d=a("1jcm");function v(t,e){if(1&t&&(r.Ub(0,"mat-option",6),r.Cc(1),r.Tb()),2&t){const t=e.$implicit;r.lc("value",t),r.Cb(1),r.Ec(" ",t," ")}}function f(t,e){if(1&t&&(r.Ub(0,"mat-option",6),r.Cc(1),r.Tb()),2&t){const t=e.$implicit;r.lc("value",t.value),r.Cb(1),r.Ec(" ",t.text," ")}}const w=[{path:"",component:c,children:[{path:"",component:(()=>{class t{constructor(t,e){this.olSer=t,this.dashSer=e,this.years=[],this.squads=[{value:"1",text:"\u7b2c\u4e00\u5206\u968a"},{value:"2",text:"\u7b2c\u4e8c\u5206\u968a"},{value:"3",text:"\u7b2c\u4e09\u5206\u968a"},{value:"4",text:"\u7b2c\u56db\u5206\u968a"},{value:"5",text:"\u7b2c\u4e94\u5206\u968a"},{value:"6",text:"\u7b2c\u516d\u5206\u968a"}],this.showEventItems=[],this.dashSer.getEvent().subscribe(t=>{this.eventItems=t,this.getYears()},t=>{})}ngOnInit(){this.olSer.drawInit(),this.olSer.HeapmapInit()}getYears(){this.years=this.eventItems.map(t=>t.year).filter((t,e,a)=>a.indexOf(t)===e)}selectYearEvent(){0===this.showEventItems.length&&(this.showEventItems=this.eventItems.map(t=>t)),this.showEventItems=this.showEventItems.filter(t=>"ALL"===this.switchYear?!!t.year:t.year===this.switchYear),this.makeRoadFeatures()}selectSquadEvent(){0===this.showEventItems.length&&(this.showEventItems=this.eventItems.map(t=>t)),this.showEventItems=this.showEventItems.filter(t=>"ALL"===this.switchSquad?!!t.squadId:t.squadId.toString()===this.switchSquad),this.makeRoadFeatures()}makeRoadFeatures(){this.olSer.clearDeawView(),this.showEventItems.forEach(t=>{t.feature=this.olSer.createLineFeature([[t.StartX,t.StartY],[t.EndX,t.EndY]]),this.olSer.addDrawFeature(t.feature)})}makeHeatmapFeatures(){this.olSer.clearDeawView(),this.showEventItems.forEach(t=>{const e=this.olSer.createPointFeature([t.StartX,t.StartY]);this.olSer.addHeatmapFeature(e);const a=this.olSer.createPointFeature([t.EndX,t.EndY]);this.olSer.addHeatmapFeature(a)})}slideHeatmapChnage(t){t?this.makeHeatmapFeatures():(this.olSer.clearHeatmapFeature(),this.makeRoadFeatures())}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(h.a),r.Ob(u))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-menu-tools"]],inputs:{years:"years"},decls:24,vars:4,consts:[[3,"value","selectionChange","valueChange"],["value",""],["value","ALL"],[3,"value",4,"ngFor","ngForOf"],[1,"margin-left"],[1,"heatmap-toggle",3,"change"],[3,"value"]],template:function(t,e){1&t&&(r.Ub(0,"div"),r.Ub(1,"span"),r.Ub(2,"mat-form-field"),r.Ub(3,"mat-label"),r.Cc(4,"\u5e74\u4efd"),r.Tb(),r.Ub(5,"mat-select",0),r.cc("selectionChange",(function(){return e.selectYearEvent()}))("valueChange",(function(t){return e.switchYear=t})),r.Ub(6,"mat-option",1),r.Cc(7,"\u672a\u9078\u53d6"),r.Tb(),r.Ub(8,"mat-option",2),r.Cc(9,"\u5168\u5e74\u4efd"),r.Tb(),r.Ac(10,v,2,2,"mat-option",3),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"span",4),r.Ub(12,"mat-form-field"),r.Ub(13,"mat-label"),r.Cc(14,"\u5206\u968a"),r.Tb(),r.Ub(15,"mat-select",0),r.cc("selectionChange",(function(){return e.selectSquadEvent()}))("valueChange",(function(t){return e.switchSquad=t})),r.Ub(16,"mat-option",1),r.Cc(17,"\u672a\u9078\u53d6"),r.Tb(),r.Ub(18,"mat-option",2),r.Cc(19,"\u5168\u5206\u968a"),r.Tb(),r.Ac(20,f,2,2,"mat-option",3),r.Tb(),r.Tb(),r.Tb(),r.Ub(21,"span",4),r.Ub(22,"mat-slide-toggle",5),r.cc("change",(function(t){return e.slideHeatmapChnage(t.checked)})),r.Cc(23,"\u958b\u555f\u71b1\u5340\u5716"),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Cb(5),r.lc("value",e.switchYear),r.Cb(5),r.lc("ngForOf",e.years),r.Cb(5),r.lc("value",e.switchSquad),r.Cb(5),r.lc("ngForOf",e.squads))},directives:[b.c,b.g,m.a,p.o,s.s,d.a],styles:[".margin-left[_ngcontent-%COMP%]{margin-left:20px}"]}),t})()}]}];let g=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(w)],n.e]}),t})();var S=a("wKbA"),C=a("otUU");let E=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[u],imports:[[s.c,g,C.a,S.a]]}),t})()}}]);